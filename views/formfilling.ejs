<% layout("./layouts/boilerplate") %>
<div class="container py-5">
  <h2 class="mb-4">Upload Insurance Document</h2>
  <form action="/Parijana/formfilling/upload" method="POST" enctype="multipart/form-data">
    <div class="mb-3">
      <input type="file" name="doc" class="form-control" required>
    </div>
    <button type="submit" class="btn btn-primary">Upload & Extract</button>
  </form>

  <% if (data) { %>
    <hr>
    <h3 class="mt-4">Auto-filled Form (Editable)</h3>
    <form action="/Parijana/formfilling/submit" method="POST">
      <div class="mb-3">
        <label for="name" class="form-label">Name</label>
        <input type="text" name="name" id="name" class="form-control" value="<%= data.name %>" required>
      </div>
      <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input type="email" name="email" id="email" class="form-control" value="<%= data.email %>" required>
      </div>
      <div class="mb-3">
        <label for="phone" class="form-label">Phone</label>
        <input type="text" name="phone" id="phone" class="form-control" value="<%= data.phone %>" required>
      </div>
      <div class="mb-3">
        <label for="policyNumber" class="form-label">Policy Number</label>
        <input type="text" name="policyNumber" id="policyNumber" class="form-control" value="<%= data.policyNumber %>" required>
      </div>
      <div class="mb-3">
        <label for="claimType" class="form-label">Claim Type</label>
        <input type="text" name="claimType" id="claimType" class="form-control" value="<%= data.claimType %>" required>
      </div>
      <div class="mb-3">
        <label for="reason" class="form-label">Reason</label>
        <input type="text" name="reason" id="reason" class="form-control" value="<%= data.reason %>" required>
      </div>
      <div class="mb-3">
        <label for="address" class="form-label">Address</label>
        <input type="text" name="address" id="address" class="form-control" value="<%= data.address %>" required>
      </div>
      <div class="mb-3">
        <label for="documentText" class="form-label">Document Text</label>
        <textarea name="documentText" id="documentText" class="form-control" rows="4" readonly><%= data.documentText %></textarea>
      </div>
      <button type="submit" class="btn btn-success">Submit</button>
    </form>
  <% } else { %> 
    <hr>
    <h3 class="mt-4">Manual Form Fill</h3>
    <form action="/Parijana/formfilling/submit" method="POST">
      <div class="mb-3">
        <label for="name" class="form-label">Name</label>
        <input type="text" name="name" id="name" class="form-control" required>
      </div>
      <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input type="email" name="email" id="email" class="form-control" required>
      </div>
      <div class="mb-3">
        <label for="phone" class="form-label">Phone</label>
        <input type="text" name="phone" id="phone" class="form-control" required>
      </div>
      <div class="mb-3">
        <label for="policyNumber" class="form-label">Policy Number</label>
        <input type="text" name="policyNumber" id="policyNumber" class="form-control" required>
      </div>
      <div class="mb-3">
        <label for="claimType" class="form-label">Claim Type</label>
        <input type="text" name="claimType" id="claimType" class="form-control" required>
      </div>
      <div class="mb-3">
        <label for="reason" class="form-label">Reason</label>
        <input type="text" name="reason" id="reason" class="form-control" required>
      </div>
      <div class="mb-3">
        <label for="address" class="form-label">Address</label>
        <input type="text" name="address" id="address" class="form-control" required>
      </div>
      <button type="submit" class="btn btn-success">Submit</button>
    </form>
  <% } %>
</div>
